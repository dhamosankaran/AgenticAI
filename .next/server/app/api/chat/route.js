"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7305:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>x,originalPathname:()=>P,patchFetch:()=>A,requestAsyncStorage:()=>k,routeModule:()=>w,serverHooks:()=>f,staticGenerationAsyncStorage:()=>S,staticGenerationBailout:()=>v});var o={};r.r(o),r.d(o,{POST:()=>g});var a=r(5419),n=r(9108),s=r(9678),i=r(8070),c=r(2),u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let r=(0,c.forwardRef)(({color:r="currentColor",size:o=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:s="",children:i,...l},d)=>(0,c.createElement)("svg",{ref:d,...u,width:o,height:o,stroke:r,strokeWidth:n?24*Number(a)/Number(o):a,className:["lucide",`lucide-${p(e)}`,s].join(" "),...l},[...t.map(([e,t])=>(0,c.createElement)(e,t)),...Array.isArray(i)?i:[i]]));return r.displayName=`${e}`,r};l("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),l("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),l("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),l("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);let d={analyze:"/api/analyze"};class m extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}let h=e=>{{let t=process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000";return`${t}${e}`}};async function y(e){try{let t=h(d.analyze),r="ca699d7214e8ec6d2b6d04c13b842fd96a1869240003f793457d26e0c8238d41";if(console.log("API Client - Request Debug:",{url:t,hasApiKey:!!r,apiKeyLength:r?.length,method:"POST"}),!r)throw new m(401,"API key not configured");let o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","x-api-key":r},body:JSON.stringify(e),cache:"no-store"});if(!o.ok){let e=await o.text();throw console.error("API Error Response:",{status:o.status,statusText:o.statusText,error:e,url:t}),new m(o.status,e)}return await o.json()}catch(e){if(console.error("API Client Error:",{name:e instanceof Error?e.name:"Unknown",message:e instanceof Error?e.message:String(e),stack:e instanceof Error?e.stack:void 0}),e instanceof m)throw e;throw new m(500,e instanceof Error?e.message:String(e))}}async function g(e){try{let t,r;try{t=await e.json(),console.log("API Route - Received request body:",t)}catch(e){return console.error("API Route - JSON Parsing Error:",e),new i.Z("Invalid request body",{status:400})}try{if("string"==typeof t.prompt){let e=JSON.parse(t.prompt);r={product_name:e.product_name||"",context:e.context||""}}else r={product_name:t.product_name||"",context:t.context||""};console.log("API Route - Processed request:",r)}catch(e){return console.error("API Route - Prompt Parsing Error:",e),new i.Z("Invalid prompt format",{status:400})}if(!r.product_name)return console.error("API Route - Missing product name"),new i.Z("Product name is required",{status:400});let o=new TransformStream,a=o.writable.getWriter(),n=new TextEncoder;return y(r).then(async e=>{try{let t=`data: ${JSON.stringify(e)}

`;await a.write(n.encode(t))}catch(e){console.error("Error writing response:",e)}finally{a.close()}}).catch(async e=>{console.error("API Route - Analysis Error:",e);let t={metadata:{timestamp:new Date().toISOString(),version:"2.0",status:"error"},results:{manager:{content:"",status:"error",timestamp:new Date().toISOString()},market:{content:"",status:"error",timestamp:new Date().toISOString()},consumer:{content:"",status:"error",timestamp:new Date().toISOString()},industry:{content:"",status:"error",timestamp:new Date().toISOString()}},errors:{system_error:e.message||"Unknown error"}};try{let e=`data: ${JSON.stringify(t)}

`;await a.write(n.encode(e))}catch(e){console.error("Error writing error response:",e)}finally{a.close()}}),new i.Z(o.readable,{headers:{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}})}catch(t){console.error("API Route - Unhandled Error:",t);let e={metadata:{timestamp:new Date().toISOString(),version:"2.0",status:"error"},results:{manager:{content:"",status:"error",timestamp:new Date().toISOString()},market:{content:"",status:"error",timestamp:new Date().toISOString()},consumer:{content:"",status:"error",timestamp:new Date().toISOString()},industry:{content:"",status:"error",timestamp:new Date().toISOString()}},errors:{system_error:t.message||"Unknown error"}};return new i.Z(JSON.stringify(e),{status:t.status||500,headers:{"Content-Type":"application/json"}})}}let w=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/kalaidhamu/Downloads/MarketResearch/src/app/api/chat/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:k,staticGenerationAsyncStorage:S,serverHooks:f,headerHooks:x,staticGenerationBailout:v}=w,P="/api/chat/route";function A(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:S})}},482:(e,t,r)=>{e.exports=r(399)},2:(e,t,r)=>{e.exports=r(482).vendored["react-rsc"].React}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,206],()=>r(7305));module.exports=o})();